"use strict";

require("./style.css");

const urlParams = new URLSearchParams(location.search);
let roomId = urlParams.get("id");

if (!roomId) {
  roomId = Math.floor(Math.random() * 10000 + 10000);
  window.location.search = `id=${roomId}`;
}

const textArea = document.querySelector("textarea");
const socketEndpoint = "wss://us-nyc-1.websocket.me/v3/${roomId}?api_key=681tFzqu4pDMkvgHcVzTOZJOGPanww2ANJwPIgvc&notify_self";
const socket = new WebSocket(socketEndpoint);

socket.onopen = () => {};

socket.onmessage = e => {
  //   console.log(e.data);
  textArea.value = e.data;
};

textArea.addEventListener("change", e => {
  //   console.log(e.target.value);
  socket.send(e.target.value);
});